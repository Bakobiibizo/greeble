<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Greeble Flask Demo</title>
    <link rel="stylesheet" href="/static/greeble/greeble-core.css" />
    <link rel="stylesheet" href="/static/greeble/greeble-landing.css" />
    <link rel="icon" href="/static/images/greeble-icon-black.svg" type="image/svg+xml" media="(prefers-color-scheme: light)" />
    <link rel="icon" href="/static/images/greeble-icon-alpha-white.png" sizes="any" media="(prefers-color-scheme: dark)" />
    <script src="https://unpkg.com/htmx.org@1.9.12" defer></script>
    <script>
      // Minimal client to render toasts from HX-Trigger events
      (function () {
        function renderToast(t) {
          var root = document.getElementById("greeble-toasts");
          if (!root) return;
          var el = document.createElement("div");
          el.className = "greeble-toast greeble-toast--" + (t.level || "info");
          el.setAttribute("role", "status");
          var body = document.createElement("div");
          body.className = "greeble-toast__body";
          var title = document.createElement("p");
          title.className = "greeble-toast__title";
          title.textContent = t.title || "";
          var msg = document.createElement("p");
          msg.className = "greeble-toast__message";
          msg.textContent = t.message || "";
          body.appendChild(title);
          body.appendChild(msg);
          var btn = document.createElement("button");
          btn.className = "greeble-icon-button greeble-toast__dismiss";
          btn.setAttribute("aria-label", "Dismiss");
          btn.textContent = "Ã—";
          btn.addEventListener("click", function () { el.remove(); });
          el.appendChild(body);
          el.appendChild(btn);
          root.appendChild(el);
          setTimeout(function () { el.remove(); }, 5000);
        }

        document.addEventListener("greeble:toast", function (e) {
          var data = e.detail;
          if (Array.isArray(data)) {
            data.forEach(renderToast);
          } else if (data && (data.message || data.level || data.title)) {
            renderToast(data);
          }
        });
      })();
    </script>
  </head>
  <body>
    <div id="greeble-toasts" class="greeble-toast-region" aria-live="polite" aria-label="Notifications"></div>
    <main>
      {% block content %}{% endblock %}
    </main>
  </body>
</html>
